{% extends "base.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}
{% block content %}
    <div class="d-flex align-items-center justify-content-between flex-wrap">
        <div class="d-flex align-items-center">
            <a class="btn btn-link back-link" href="{% url 'blog:post_list' %}">
                <img class="me-2" src="{% static 'images/arrow.svg' %}" alt="logo" width="40">
            </a>
            <h1>{{ post.title }}</h1>
        </div>

        <div>
            Published {{ post.publish }} by {{ post.author }}
        </div>
    </div>
    {{ post.body|linebreaks }}

    <div>
        {% with comments.count as total_comments %}
            <h2>
                {{ total_comments }} comment{{ total_comments|pluralize }}
            </h2>
        {% endwith %}

        {% if not request.user.is_authenticated %}
            <div>To add comments you need to be logged in.</div>
        {% endif %}

        {% for comment in comments %}
            <div class="comment">
                <p class="info">
                    Comment {{ forloop.counter }} by {{ comment.profile.user.username }}
                    {{ comment.created }}
                </p>
                {{ comment.body|linebreaks }}
            </div>
        {% empty %}
            <p>There are no comments.</p>
        {% endfor %}
        {% include "partials/comment_form.html" %}
    </div>
{% endblock %}
